# 在 Quartz 作业中注入 Spring 依赖项

> 原文： [https://howtodoinjava.com/spring-batch/spring-beans-in-quartz-job/](https://howtodoinjava.com/spring-batch/spring-beans-in-quartz-job/)

默认情况下，Quartz 无法识别在`applicationContext.xml`或带有`@Bean`注解的 SpringBean。 如果尝试以 Quartz `Job`或`QuartzJobBean`来`@Autowired`这些 bean，您将得到`NullPointerException`。

## 将 Spring 上下文注入`QuartzJobBean`

解决方案是将 Spring 的`ApplicationContext`实例注入到`org.quartz.SchedulerContext`中，该实例可通过`executeInternal()`方法的`org.quartz.JobExecutionContext`参数使用。

1.  #### 将 applicationContext 注入 SchedulerContext

    这是典型的`SchedulerFactoryBean` bean 条目。 使用[`setApplicationContextSchedulerContextKey()`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html#setApplicationContextSchedulerContextKey-java.lang.String-)方法。 此方法设置要在`SchedulerContext`中公开的`ApplicationContext`引用的键。

    [PRE0]

2.  #### 在 Quartz QuartzJobBean 中访问注入 bean

    现在，您需要做的就是 – 获得`applicationContext`参考，并根据需要开始获取 bean。

    `CustomQuartzJob.java`

    [PRE1]

现在，当您运行 Quartz 作业时，将通过`executeInternal()`方法获得`jobLocator`和`jobLauncher`实例。

将我的问题放在评论部分。

学习愉快！