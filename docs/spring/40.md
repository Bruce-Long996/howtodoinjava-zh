# Spring Boot2 `@SpringBootApplication`自动配置

> 原文： [https://howtodoinjava.com/spring-boot2/springbootapplication-auto-configuration/](https://howtodoinjava.com/spring-boot2/springbootapplication-auto-configuration/)

Spring Boot 非常易于使用，它在后台执行了许多操作，您可能没有意识到。 将来，一个好的开发人员将确切地了解 **spring boot 自动配置**背后的工作，如何以自己的喜好使用它，以及如何禁用某些不需要的部分到您的项目中。

为了了解 Spring Boot 背后的大多数基本知识，我们将创建一个具有单个依赖项和单个启动类文件的最小启动应用程序。 然后，我们将分析启动日志以获取见解。

## 使用启动类创建 Spring Boot 应用程序

1.  在 Eclipse 中创建一个新的 Maven 项目，原型为`maven-archetype-quickstart`。
2.  使用`spring-boot-starter-web`依赖性和插件信息更新`pom.xml`文件。

    [PRE0]

3.  创建启动应用。

    [PRE1]

    #### 这个入门班是做什么的？

    上面的类称为 Spring Boot 应用程序启动类。 它曾经通过 Java `main()`方法来运行和启动 Spring 应用程序。 它通常会执行以下操作：

    *   创建 Spring 的`ApplicationContext`的实例。
    *   启用该功能以接受命令行参数并将其公开为 Spring 属性。
    *   根据配置加载所有 Spring bean。 您还可以根据项目需要进行其他操作。

## `@SpringBootApplication`注解

此注解是在一条语句中应用 3 个注解的快捷方式：

1.  #### `@SpringBootConfiguration`

    [@SpringBootConfiguration](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringBootConfiguration.html) 是 Spring Boot 2 中的新注解。以前，我们一直在使用[`@Configuration`](https://docs.spring.io/spring-framework/docs/5.0.4.RELEASE/javadoc-api/org/springframework/context/annotation/Configuration.html)注解。 您可以代替使用`@Configuration`。 两者都是同一回事。

    它指示一个类提供 Spring Boot 应用程序`@Configuration`。 它仅表示带注解的类是配置类，应对其进行扫描以获取进一步的配置和 Bean 定义。

2.  #### `@EnableAutoConfiguration`

    该注解用于启用 Spring 应用下上文的自动配置，尝试猜测和配置您可能需要的 bean。 通常根据您的类路径和定义的 bean 来应用自动配置类。

    自动配置会尝试尽可能智能化，并且在您定义更多自己的配置时会自动退出。 您始终可以使用两种方法手动排除您永远不想应用的任何配置：

    i）使用`excludeName()`
    
    ii）使用属性文件中的`spring.autoconfigure.exclude`属性。 例如

    [PRE2]

    自动配置始终在注册用户定义的 bean 之后应用。

3.  #### `@ComponentScan`

    该注解提供与 Spring XML 的`context:component-scan`元素并行的支持。

    可以指定`basePackageClasses()`或`basePackages()`定义要扫描的特定程序包。 如果未定义特定的程序包，则将从声明此注解的类的程序包中进行扫描。

## 运行启动应用程序并检查日志

让我们以最简单的选项开始运行它 - 作为 Java 应用程序运行。 在您的 IDE 中，右键单击应用程序类，然后将其作为 Java 应用程序运行。 为了了解已注册的 bean，我添加了如下修改的启动应用程序。

[PRE3]

现在查看日志：

[PRE4]

您会看到有多少个 bean 自动注册。 那是 SpringBoot 子的美。 如果您想更深入地研究为什么要注册任何特定的 bean？ 通过在应用程序启动时放置调试标志，您可以看到这一点。

**只需将`-Ddebug=true`作为 VM 参数传递。**

现在，当您运行该应用程序时，您将获得许多调试日志，它们具有类似的信息：

[PRE5]

上面的日志说明了为什么将特定的 bean 注册到 spring 上下文中。 当您调试自动配置问题时，此信息非常有用。

同样，每次我们向 Spring Boot 项目添加新的依赖项时，Spring Boot 自动配置都会自动尝试基于该依赖项配置 Bean。

希望以上讨论的信息将来能在调试 Spring Boot 相关问题时为您提供帮助。

学习愉快！