# Spring 定时器任务

> 原文： [https://howtodoinjava.com/spring-core/spring-timer-tasks/](https://howtodoinjava.com/spring-core/spring-timer-tasks/)

`Timer`是一种实用程序类，用于安排**一次和重复执行**的任务。 通过计时器任务，Spring 框架为执行计划定期执行多次甚至是一次执行的任务提供支持。

还有其他方法可以在 Java 中实现调度程序功能，例如使用[执行程序服务](//howtodoinjava.com/java-5/how-to-use-blockingqueue-and-threadpoolexecutor-in-java/)或使用 Quartz 等第三方 API 来无限循环地运行线程。 `Timer`恰好是其中之一。

请注意，`Timer`取决于系统时钟，因此将系统时钟设置为 n 小时将使下一次执行计时器任务的时间也减少 n 小时。

在 Spring 中，有两种使用计时器任务的方法：

1.  配置`MethodInvokingTimerTaskFactoryBean`
2.  扩展`java.util.TimerTask`

让我们使用示例演示每个用法。

## 1\. 配置`MethodInvokingTimerTaskFactoryBean`

在此方法中，在[`org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/timer/MethodInvokingTimerTaskFactoryBean.html)定义中配置了计时器任务 bean 及其内部要执行的方法。 这是一个工厂 Bean，它公开 [`TimerTask`](http://java.sun.com/javase/6/docs/api/java/util/TimerTask.html) 对象，该对象将作业执行委派给指定的（静态或非静态）方法。 这避免了实现仅调用现有业务方法的单行`TimerTask`的需要。

Spring 配置示例如下所示：

`applicationContext.xml`

[PRE0]

上面的计时器任务将获得`executed in every 5 seconds`。 让我们写出演示计时器任务并对其进行测试。

`DemoTimerTask.java`

[PRE1]

现在，让我们测试计时器任务。

`TestDemoTimerTask.java`

[PRE2]

`Console`

[PRE3]

## 2\. 扩展`java.util.TimerTask`

通过这种方式，我们通过扩展 [java.util.TimerTask](https://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html) 来定义定时器任务，并将其传递给 spring 配置以便重复执行。

让我们来看看如何做：

`applicationContext.xml`

[PRE4]

以上任务将得到`executed in every 3 seconds`。 让我们从 java 提供的`TimerTask`中扩展计时器任务。

`DemoTimerTask2.java`

[PRE5]

让我们测试配置：

`TestDemoTimerTask2.java`

[PRE6]

`Console`

[PRE7]

[下载源码](https://docs.google.com/file/d/0B7yo2HclmjI4ZVFSNWxpSWM0dGc/edit?usp=sharing)

学习愉快！